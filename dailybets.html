<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Daily Best Bets</title>
  <style>
    :root{--bg:#1e1e2f;--panel:#2c2c3e;--panel-2:#2a2a3d;--ink:#fff;--gold:#ffd700;--muted:#a8b3cf;--line:#444;--accent:#00bfff;--row:#0f3057}
    *{box-sizing:border-box}
    body{background:var(--bg);color:var(--ink);font-family:'Segoe UI',system-ui,Arial,sans-serif;padding:2rem;line-height:1.45}
    header{display:flex;flex-direction:column;gap:.25rem;align-items:center;margin-bottom:1.25rem}
    h1{color:var(--gold);margin:0;font-size:clamp(1.4rem,2.2vw,2rem);text-align:center}
    .sub{color:var(--muted);font-size:.95rem}
    nav{margin:1rem 0 2rem;text-align:center}
    nav a{color:var(--accent);text-decoration:none;font-weight:600}
    nav a:hover{text-decoration:underline}
    section{margin:2rem auto;max-width:1100px}
    h2{color:var(--gold);margin:1.25rem 0 .5rem;border-bottom:2px solid var(--line);padding-bottom:.35rem}
    .wrap{background:var(--panel);border-radius:10px;overflow:hidden}
    table{width:100%;border-collapse:collapse}
    th,td{padding:.65rem .9rem;text-align:center;vertical-align:top}
    th{background:#444;color:var(--gold)}
    tr:nth-child(even){background:var(--panel-2)}
    tr.row{background:var(--row)!important;color:#fff;font-weight:700}
    small.reason{display:block;font-weight:600;font-size:.85em;margin-top:.25rem;color:#d7e9ff}
    .muted{color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <h1>🔥 Daily Best Bets</h1>
    <div class="sub" id="dateLine">Loading date…</div>
  </header>

  <nav>
    <a href="index.html">🏠 Race Visualizer</a> &nbsp;•&nbsp;
    <a href="value.html">💰 Value Bets</a>
  </nav>

  <main id="content"></main>

  <script>
  const sportIcon = s => ({ 'Darts':'🎯','Horse Racing':'🏇','Football':'⚽','Tennis':'🎾','Cricket':'🏏','Golf':'⛳' }[s]||'🧠');

  function makeTable(headers, rows){
    const thead = '<thead><tr>'+headers.map(h=>`<th>${h}</th>`).join('')+'</tr></thead>';
    const tbody = '<tbody>'+ (rows.length ? rows.map(r=>{
      const tds = r.map(c=>`<td>${c}</td>`).join('');
      return `<tr class="row">${tds}</tr>`;
    }).join('') : `<tr><td colspan="${headers.length}">No tips.</td></tr>`) +'</tbody>';
    return `<div class="wrap"><table>${thead}${tbody}</table></div>`;
  }

  fetch('daily_bets.json')
    .then(r=>r.json())
    .then(data=>{
      document.getElementById('dateLine').textContent = data?.date ? `Bets for ${data.date}` : 'Bets';
      const root = document.getElementById('content'); root.innerHTML = '';

      (data?.sports||[]).forEach(sp=>{
        const sec = document.createElement('section');
        sec.innerHTML = `<h2>${sportIcon(sp.sport||'')} ${sp.sport||'Sport'}${sp.competition?' — '+sp.competition:''}</h2>`;

        const picks = (sp.picks||[]).filter(p => (p.type||'Win') === 'Win')
          .sort((a,b)=> (a.time||'').localeCompare(b.time||''));

        const rows = picks.map(p=>[
          `${p.time||'-'}`,
          `${p.match||'-'}<small class="reason">🧠 ${p.reason||''}</small>`,
          `<strong>${p.selection||'-'}</strong>`,
          `${p.odds_fractional||'-'}`,
          `Win`
        ]);

        const tbl = document.createElement('div');
        tbl.innerHTML = makeTable(['Time','Match / Notes','Tip','Odds (Frac)','Type'], rows);
        sec.appendChild(tbl);
        root.appendChild(sec);
      });
    })
    .catch(e=>{
      document.getElementById('content').innerHTML =
        `<div>Could not load <code>daily_bets.json</code><br/><span class="muted">${e}</span></div>`;
    });
  </script>
</body>
</html>
